<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web综合 | 三火的面经</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="面包总会有的">
    
    <link rel="preload" href="/assets/css/0.styles.13bf63d7.css" as="style"><link rel="preload" href="/assets/js/app.b6f8d18b.js" as="script"><link rel="preload" href="/assets/js/2.fb2a525f.js" as="script"><link rel="preload" href="/assets/js/8.2148b88b.js" as="script"><link rel="prefetch" href="/assets/js/10.ec93b05c.js"><link rel="prefetch" href="/assets/js/11.7d3cbdee.js"><link rel="prefetch" href="/assets/js/12.6676b95a.js"><link rel="prefetch" href="/assets/js/13.38cdb905.js"><link rel="prefetch" href="/assets/js/14.20b949ec.js"><link rel="prefetch" href="/assets/js/15.672a6e04.js"><link rel="prefetch" href="/assets/js/16.0dfc804a.js"><link rel="prefetch" href="/assets/js/17.4cddca5f.js"><link rel="prefetch" href="/assets/js/18.60ee6aa8.js"><link rel="prefetch" href="/assets/js/19.221d0d93.js"><link rel="prefetch" href="/assets/js/20.ec47fd03.js"><link rel="prefetch" href="/assets/js/21.ceeb8dde.js"><link rel="prefetch" href="/assets/js/22.968b3628.js"><link rel="prefetch" href="/assets/js/23.daacfe38.js"><link rel="prefetch" href="/assets/js/24.4df17c2a.js"><link rel="prefetch" href="/assets/js/25.2d10be57.js"><link rel="prefetch" href="/assets/js/26.fc9d2471.js"><link rel="prefetch" href="/assets/js/27.0ac5bbf5.js"><link rel="prefetch" href="/assets/js/28.a6b779e7.js"><link rel="prefetch" href="/assets/js/29.b8e76aae.js"><link rel="prefetch" href="/assets/js/3.ff69530c.js"><link rel="prefetch" href="/assets/js/30.82c461f5.js"><link rel="prefetch" href="/assets/js/31.c114d167.js"><link rel="prefetch" href="/assets/js/32.2788908b.js"><link rel="prefetch" href="/assets/js/33.42bfdf82.js"><link rel="prefetch" href="/assets/js/34.1b156747.js"><link rel="prefetch" href="/assets/js/35.d90dbd14.js"><link rel="prefetch" href="/assets/js/36.81a40c1c.js"><link rel="prefetch" href="/assets/js/37.8bce1db8.js"><link rel="prefetch" href="/assets/js/38.a6c53423.js"><link rel="prefetch" href="/assets/js/4.64f93380.js"><link rel="prefetch" href="/assets/js/5.c504940f.js"><link rel="prefetch" href="/assets/js/6.fad0f79d.js"><link rel="prefetch" href="/assets/js/7.badf6685.js"><link rel="prefetch" href="/assets/js/9.57ea30bb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.13bf63d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">三火的面经</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/base/html.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/base/css.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/base/es5.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/base/es6.html" class="nav-link">
  ES6+
</a></div><div class="nav-item"><a href="/base/engineer.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/base/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  web综合
</a></div><div class="nav-item"><a href="/base/test.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/frequency/" class="nav-link">
  高频
</a></div><div class="nav-item"><a href="https://github.com/yqwertb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/base/html.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/base/css.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/base/es5.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/base/es6.html" class="nav-link">
  ES6+
</a></div><div class="nav-item"><a href="/base/engineer.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/base/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  web综合
</a></div><div class="nav-item"><a href="/base/test.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/frequency/" class="nav-link">
  高频
</a></div><div class="nav-item"><a href="https://github.com/yqwertb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/base/html.html" class="sidebar-link">HTML</a></li><li><a href="/base/css.html" class="sidebar-link">CSS</a></li><li><a href="/base/es5.html" class="sidebar-link">ES5</a></li><li><a href="/base/es6.html" class="sidebar-link">ES6</a></li><li><a href="/base/engineer.html" class="sidebar-link">前端工程化</a></li><li><a href="/base/base.html" aria-current="page" class="active sidebar-link">web综合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/base.html#输入url到显示的过程" class="sidebar-link">输入url到显示的过程</a></li><li class="sidebar-sub-header"><a href="/base/base.html#保持登录状态的方式" class="sidebar-link">保持登录状态的方式</a></li><li class="sidebar-sub-header"><a href="/base/base.html#http请求什么时候会带上cookie信息" class="sidebar-link">HTTP请求什么时候会带上cookie信息</a></li><li class="sidebar-sub-header"><a href="/base/base.html#什么是xss和csrf" class="sidebar-link">什么是XSS和CSRF</a></li><li class="sidebar-sub-header"><a href="/base/base.html#如何防范xss和csrf" class="sidebar-link">如何防范XSS和CSRF</a></li><li class="sidebar-sub-header"><a href="/base/base.html#发起请求时怎么知道携带哪个cookie-怎么匹配cookie" class="sidebar-link">发起请求时怎么知道携带哪个cookie，怎么匹配cookie</a></li><li class="sidebar-sub-header"><a href="/base/base.html#单点登录如何实现" class="sidebar-link">单点登录如何实现</a></li><li class="sidebar-sub-header"><a href="/base/base.html#http缓存相关" class="sidebar-link">HTTP缓存相关</a></li><li class="sidebar-sub-header"><a href="/base/base.html#解释一下-cookie-的-samesite-字段" class="sidebar-link">解释一下 Cookie 的 SameSite 字段？</a></li><li class="sidebar-sub-header"><a href="/base/base.html#get和post的区别" class="sidebar-link">Get和Post的区别</a></li><li class="sidebar-sub-header"><a href="/base/base.html#cookie、-sessionstorage、-localstorage的区别" class="sidebar-link">cookie、 sessionStorage、 localStorage的区别</a></li><li class="sidebar-sub-header"><a href="/base/base.html#http缓存" class="sidebar-link">HTTP缓存</a></li><li class="sidebar-sub-header"><a href="/base/base.html#跨域的实现方法" class="sidebar-link">跨域的实现方法</a></li><li class="sidebar-sub-header"><a href="/base/base.html#简单请求和复杂请求" class="sidebar-link">简单请求和复杂请求</a></li><li class="sidebar-sub-header"><a href="/base/base.html#浏览器实时通信方案" class="sidebar-link">浏览器实时通信方案</a></li><li class="sidebar-sub-header"><a href="/base/base.html#service-worker-浏览器缓存-性能优化" class="sidebar-link">service worker （浏览器缓存 性能优化）</a></li><li class="sidebar-sub-header"><a href="/base/base.html#tcp和udp区别" class="sidebar-link">TCP和UDP区别</a></li><li class="sidebar-sub-header"><a href="/base/base.html#http-https" class="sidebar-link">HTTP/HTTPS</a></li><li class="sidebar-sub-header"><a href="/base/base.html#懒加载和预加载" class="sidebar-link">懒加载和预加载</a></li><li class="sidebar-sub-header"><a href="/base/base.html#项目的优化" class="sidebar-link">项目的优化</a></li></ul></li><li><a href="/base/test.html" class="sidebar-link">面试</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="web综合"><a href="#web综合" class="header-anchor">#</a> web综合</h1> <h2 id="输入url到显示的过程"><a href="#输入url到显示的过程" class="header-anchor">#</a> 输入url到显示的过程</h2> <ol><li><p>浏览器进程中的UI线程判断输入的是url还是搜索的内容，判断为url后和网络请求线程通信</p></li> <li><p>网络线程先要进行DNS寻址，建立连接</p> <ul><li><p>DNS寻址的过程</p></li> <li><p>三次握手，四次挥手</p></li></ul></li> <li><p>读取响应</p></li> <li><p>开始合成页面</p></li> <li><p>提交导航</p></li> <li><p>渲染页面</p></li></ol> <h2 id="保持登录状态的方式"><a href="#保持登录状态的方式" class="header-anchor">#</a> 保持登录状态的方式</h2> <ol><li><p>cookie + session</p> <p>缺点：在分布式服务器中，服务器太多，session只能对应一台服务器</p></li> <li><p>token + localStorage</p></li> <li><p>JWT(Json Web Token)</p> <p>一个JWT包含三个部分：</p> <ul><li><p>头部</p> <p>使用的算法和令牌类型</p></li> <li><p>载荷</p> <p>包含需要传递的数据</p></li> <li><p>签名</p> <p>使用服务器指定的秘钥（secret）进行签名</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">HMACSHA256</span><span class="token punctuation">(</span>
  <span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span>
  <span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">,</span>
  secret<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ol> <h2 id="http请求什么时候会带上cookie信息"><a href="#http请求什么时候会带上cookie信息" class="header-anchor">#</a> HTTP请求什么时候会带上cookie信息</h2> <ol><li>cookie中的domain属性和当前域名相同</li> <li>协议相同，或者secure属性为false</li> <li>发送请求的路径和path属性相同</li> <li>Ajax对请求设置<code>req.withCredentials</code>为true</li></ol> <h2 id="什么是xss和csrf"><a href="#什么是xss和csrf" class="header-anchor">#</a> 什么是XSS和CSRF</h2> <ol><li><p>XSS（cross-site scripting 跨站点脚本）是一种代码注入攻击</p> <p>例如用户在评论中输入由<code>&lt;script&gt;&lt;/script&gt;</code>包裹的js代码，这种就属于脚本注入，如果代码中有请求外部服务器，就是XSS。</p> <ul><li><p>DOM型</p> <p>原理：JS操作DOM</p></li> <li><p>存储型</p> <p>将恶意代码存储在网站的数据库，用户访问网站，浏览器执行恶意的代码。</p></li> <li><p>反射型</p> <p>将恶意代码存储在URL中，用户点击后执行。</p></li></ul></li> <li><p>CSRF（cross-site request forgery 跨站请求伪造）是一种挟持用户执行非本意的操作的攻击</p> <p>CSRF的一种实现方法就是XSS，通过XSS注入代码，代码携带cookie信息传输给了外部服务器（到这里是XSS攻击），外部服务器利用这些cookie进行非用户本意的http请求（这时产生了CSRF攻击）。</p> <p><a href="https://segmentfault.com/a/1190000007059639" target="_blank" rel="noopener noreferrer">用大白话谈谈XSS与CSRF<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol> <div class="custom-block tip"><p class="custom-block-title">两者的本质区别</p> <p>XSS是代码注入问题，CSRF是HTTP问题</p></div> <h2 id="如何防范xss和csrf"><a href="#如何防范xss和csrf" class="header-anchor">#</a> 如何防范XSS和CSRF</h2> <ol><li>XSS
<ul><li>对一些符号进行转义或者过滤，如&lt;&gt;。</li> <li>对cookie添加HttpOnly参数</li> <li>前端限制用户输入数据类型，比如输入年龄和手机号只能输入数字</li> <li>过滤js事件的标签</li></ul></li> <li>CSRF
<ul><li>token验证</li> <li>验证码</li> <li>请求头部 referer限制</li> <li>服务器在响应头添加内容安全策略(CSP)</li></ul></li></ol> <p><a href="https://segmentfault.com/a/1190000007766732" target="_blank" rel="noopener noreferrer">如何防范XSS和CSRF？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="发起请求时怎么知道携带哪个cookie-怎么匹配cookie"><a href="#发起请求时怎么知道携带哪个cookie-怎么匹配cookie" class="header-anchor">#</a> 发起请求时怎么知道携带哪个cookie，怎么匹配cookie</h2> <h2 id="单点登录如何实现"><a href="#单点登录如何实现" class="header-anchor">#</a> 单点登录如何实现</h2> <p><a href="https://www.cnblogs.com/ywlaker/p/6113927.html" target="_blank" rel="noopener noreferrer">单点登录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="http缓存相关"><a href="#http缓存相关" class="header-anchor">#</a> HTTP缓存相关</h2> <p><a href="https://segmentfault.com/u/gzchen" target="_blank" rel="noopener noreferrer">双方都 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="解释一下-cookie-的-samesite-字段"><a href="#解释一下-cookie-的-samesite-字段" class="header-anchor">#</a> 解释一下 Cookie 的 SameSite 字段？</h2> <p><code>SameSite</code>是HTTP响应头的属性之一，它让Cookie在跨站请求时不会被发送，阻止跨站请求伪造攻击</p> <p><code>SameSite</code>有三个属性值</p> <ul><li>Strict 目标URL与当前URL完全一致才会携带Cookie</li> <li>Lax 不允许部分第三方请求携带Cookie  （post表单、iframe、ajax、image）</li> <li>None 无论是否跨站都会发送Cookie</li></ul> <h2 id="get和post的区别"><a href="#get和post的区别" class="header-anchor">#</a> Get和Post的区别</h2> <ul><li>用途：get应该被用作获取资源，post是上传数据</li> <li>数据大小：因为浏览器的限制，get通常用大小限制，post没有</li> <li>数据类型：get只可以传输字符串，post可以传输更多类型的数据</li> <li>安全性：get会留在浏览器的浏览记录中，post安全性更高</li></ul> <h2 id="cookie、-sessionstorage、-localstorage的区别"><a href="#cookie、-sessionstorage、-localstorage的区别" class="header-anchor">#</a> cookie、 sessionStorage、 localStorage的区别</h2> <ul><li>存储大小： cookie大小为4k，storage大小为5mb</li> <li>过期时间：cookie会在设置的时间后过期（如果没有设置时间，则默认为会话cookie，在浏览器关闭后过期），session会在浏览器或标签关闭后消失，local不会主动消失</li> <li>域的区别：
<ul><li>session：即使是同一个url，也不能在不同的窗口中共享使用</li> <li>local/cookie： 在同源的窗口中可以共享</li></ul></li> <li>是否可以缺省：cookie作用是和服务器交互，是会自动携带在请求中的，而webstorage不是必须携带在请求中的</li> <li>存储类型：
<ul><li>cookie：身份信息，前后通信验证的凭证</li> <li>session：</li> <li>local：静态资源，token</li></ul></li></ul> <h2 id="http缓存"><a href="#http缓存" class="header-anchor">#</a> HTTP缓存</h2> <ul><li><p>强制缓存</p> <ul><li>HTTP1.0的<code>expires</code>字段，设置一个绝对时间，在这个时间后过期</li> <li>HTTP1.1的<code>Cache-Control</code>字段</li></ul> <blockquote><p><code>Cache-Control</code> 设置<code>max-age</code>后 ，优先级高于<code>expires</code></p></blockquote></li> <li><p>协商缓存</p> <ul><li><code>eTag</code>（响应头中）/<code>If-None-Match</code>  （请求头中）</li> <li><code>Last-Modified</code>（响应头中）/<code>If-Modified-Since</code>（请求头中）</li></ul> <blockquote><p><code>eTag</code>的优先级高于<code>Last-Modified</code></p> <p>强制缓存优先级高于协商缓存</p></blockquote></li></ul> <h2 id="跨域的实现方法"><a href="#跨域的实现方法" class="header-anchor">#</a> 跨域的实现方法</h2> <p>fetch不是解决跨域的办法</p> <ul><li>JSONP</li> <li>后端设置<code>Access-Control-Allow-Orgin</code></li> <li>postMessage
<ul><li>页面和其打开的新窗口的数据传递</li> <li>多窗口之间的消息传递</li> <li>页面与嵌套的iframe消息传递</li> <li>以上三个场景的跨域数据传递</li></ul></li> <li>websocket</li> <li>后台请求转发</li></ul> <h3 id="cors-和-jsonp-相比"><a href="#cors-和-jsonp-相比" class="header-anchor">#</a> cors 和 jsonp 相比</h3> <p>jsonp只支持get请求，cors支持所有类型的请求</p> <p>cors使用xmlhttpRequest对象进行请求，有更好的错误处理</p> <h2 id="简单请求和复杂请求"><a href="#简单请求和复杂请求" class="header-anchor">#</a> 简单请求和复杂请求</h2> <ul><li>简单请求：
<ul><li>方法限制：get、post、head</li> <li>content-type限制：text/plain、multipart/form-data、application/x-www-form-urlencoded</li></ul></li> <li>复杂请求：
<ul><li>方法：put、delete、options等</li></ul></li></ul> <p>对于简单请求，直接在请求头部添加origin，响应头添加cors属性</p> <p>对于复杂请求，需要先发送options请求，如果浏览器支持的请求包括要发生的复杂请求，发送实际请求</p> <h2 id="浏览器实时通信方案"><a href="#浏览器实时通信方案" class="header-anchor">#</a> 浏览器实时通信方案</h2> <ol><li><p>websocket</p> <p>原理： 浏览器不可以直接和服务器建立TCP连接，TCP是可靠的，双全工的数据通信通道。websocket只在最初建立连接时借用HTTP，之后都是直接使用TCP完成通信。</p> <p>使用：创建一个websocket对象实例，对实例绑定各种事件的回调函数</p></li> <li><p>server-sent-event 使用eventSource对象</p> <p>eventSource的api和websocket的类似</p> <p>头部的<code>accept</code>是<code>text/event-stream</code></p></li> <li><p>长轮询</p> <p>http是基于请求/响应的，长短连接说的是TCP连接</p> <blockquote><p>http请求和响应都是通过tcp连接这个通道传输的</p></blockquote> <p>长连接意味着tcp连接复用，多个http请求利用一个tcp连接，不用建立多个tcp请求</p></li></ol> <h2 id="service-worker-浏览器缓存-性能优化"><a href="#service-worker-浏览器缓存-性能优化" class="header-anchor">#</a> service worker （浏览器缓存 性能优化）</h2> <p>service worker是web worker的一种，在额外的线程上执行js代码。service worker下有cache和cache storage两个接口 cache和请求相关， cache storage和cache对象打交道。</p> <p>把图片 js css等文件可以存入cache storage中，优化性能</p> <p>service worker除了缓存文件，做离线应用；还可以用来推送消息；提前获取文件资源</p> <p><a href="https://panzhongxian.cn/cn/2021/04/07-the-building-blocks-of-web-workers-5-cases-when-you-should-use-them/" target="_blank" rel="noopener noreferrer">service worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="tcp和udp区别"><a href="#tcp和udp区别" class="header-anchor">#</a> TCP和UDP区别</h2> <ol><li>处理报文
<ul><li>udp在传输过程中不会拆分报文，发送方会直接在报文添加首部，接收方直接去掉报文首部交给应用程序。</li> <li>tcp把数据报文看做数据流，并将数据流编号存在发送缓存中，tcp根据发送策略，从缓存中提取字节发送</li></ul></li> <li>提供的传输服务
<ul><li>udp不会关注传输过程中报文的丢失，因此适合实时的场景中（视频会议，电话，dns）</li> <li>tcp有校验和，超时重传，流量控制，拥塞控制来保证报文数据的完整，适合需要可靠传输的场景（文件传输，电子邮件）</li></ul></li> <li>首部的格式
<ul><li>udp首部简单，有源端口、目的端口、长度和校验和</li> <li>tcp首部复杂，除了udp有的还有序号确认号，滑动窗口相关的</li></ul></li></ol> <h2 id="http-https"><a href="#http-https" class="header-anchor">#</a> HTTP/HTTPS</h2> <h2 id="懒加载和预加载"><a href="#懒加载和预加载" class="header-anchor">#</a> 懒加载和预加载</h2> <ul><li><p>懒加载</p> <ul><li><p><code>getBoundingClientRect</code></p> <p><code>getBoundingClientRect</code>返回元素相对于视口的位置</p> <p>top大于等于0 &amp;&amp; bottom小于等于视口高度 &amp;&amp; left 大于等于0 &amp;&amp; right 小于等于视口宽度</p></li> <li><p><code>IntersectionObserver</code></p> <p>设置监听对象和边界盒交叉的比例值（100%）当元素可见比例达到设置的值后，调用一个回调函数，在函数中加载图片。</p> <p><a href="https://juejin.cn/post/7070015633995333645#heading-3" target="_blank" rel="noopener noreferrer">懒加载原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></li> <li><p>预加载</p> <ul><li>js新建image对象，给src属性赋值</li></ul></li></ul> <h2 id="项目的优化"><a href="#项目的优化" class="header-anchor">#</a> 项目的优化</h2> <p><a href="https://learnku.com/docs/f2e-performance-rules/reduce-dns-queries/6370" target="_blank" rel="noopener noreferrer">优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="首次加载"><a href="#首次加载" class="header-anchor">#</a> 首次加载</h3> <p>减少http的请求数 使用http1.1 http2.0</p> <p>减少dns查询：ttl（time-to-live）值变大， 减少请求的域名数量</p> <p>dns预解析</p> <p>使用cdn</p> <p>图片懒加载</p> <p>script标签和link的设置</p> <p>压缩代码/http gzip压缩/</p> <p>http缓存/service worker</p> <p>图片格式（webp） 精灵图</p> <p>cookie减肥</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/base/engineer.html" class="prev">
        前端工程化
      </a></span> <span class="next"><a href="/base/test.html">
        面试
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b6f8d18b.js" defer></script><script src="/assets/js/2.fb2a525f.js" defer></script><script src="/assets/js/8.2148b88b.js" defer></script>
  </body>
</html>
